os:
  - linux
  - osx

osx_image: xcode9.3

language: android

jdk:
  - oraclejdk8

install: ./gradlew :oolong:build

script: .buildscript/deploy_snapshot.sh ":oolong:publish"

env:
  global:
    - GRADLE_OPTS: "-Dorg.gradle.configureondemand=true -Dorg.gradle.parallel=true -Dorg.gradle.workers.max=2 -Dkotlin.incremental=false"
    - secure: "Ed1mR22XKw6kU3leWV42qGKmdnwCd0rbR1BeMOypHT1x+mN1uz/Lp5DuvE535jkvDg3wWvNaxp5yeJA4WWhVoNwDBP98x9teDyYnquM3u5XBrgKzdyb4DFLEO0IkLUY+eNf8+WicO4x2MVcL2O6VYqS4ya6K3VTioAYLPxfRZ1YVM06K2Yiz8pFYLdgIR/sGKo+hdUM4yQ8JKXznejz+vazQKoJgCnia30rwDdzAYhjjL5XMqHgovUyfe5B7jlWtz9tjyhphuq2r5ykRU8xvquNgXNZZYEMYOi/wNqc+h5bRkol9CIYTvDEIByTjiQsB1oCWMy2cXy9ATr/y/4o5Aa3o3pkTKwVe/z+dt2atcuxP9JhR6LHQwsQ/4RvgXs4KkRHiU0VIgEkiwpwRoUb4A/+H+SFCOjBxEjw3Eg0MAhienrBwS5noh85d/bLRv5yN8Q3YkD/NrEOaEHBCQmd0T9g90OMuMCXfpQzuoPkUIWP8rIrroBt/Tmazjer0/wSFj6qGgQn2T0dBtzfEshA6SDDKmnbg3jHqHMypBe/5bVB7ncTrpKvmX2BTKUsCqDePBuxnT+RfPQ7VemH4+joYbdazkET1UkTWrCE/QJZ0ZGj9Oda6QaSORGwz/rvAo/2J4Vw5D2ks41VfzQ3B69ujy+80tOCzZLRT2QWG3PIEYss="
    - secure: "O1RcZSjy0RXWvJWZCT2OgA+v9etR99ZMojXf7meCdlSkFAdTVo3R2Bt0ssujbVnVEm43qhVBzda717am8t4lNtfM7H0HijHJFApkJsThb/ubxsBfn0CMznnpR+xRsxJkoX0lC6Zrkhpj2Q6m9nlEspeh54uZfrW1wI9pjJW5gHn5jdI7Q9DKgcsmJ3JP4t8nOKgYSezHSRaWY/6c8nhs6FM0ch7db6ha8kxAAc3vxS0vnneXPlM/lB73zz2WviuBRRkWuSJFJ5kVJvFBW37P8IRkTCYRvt4oCH12qEUzyW5EFLBAhUZJvVsAa2PmFmmcFGCEnR/juR3CIU42d/W0qYfLmHNFH2RsAuEonHm8XDKiVCjqxGHvYUeHIE5nwNv6CH8VkXm7FXB9D/xkaJCCAkMHhudaNRooG6aRGN56kZ5dEFf/cQqVuWQMy7zp2xGwkthGj/UzB7DvjlF9Z+/fFkZwgnBR1ERVWBW8DdQO248BqRx704Rq9KCc2jfy0nlUPQDaY5boBkE5z0ruyIL214qvpj5TyaOaWQieuPdMovO6Nu+fU+Ld6AwcqE9lMS5qJqBNhY1rSeuLSNOMvtoBsH9a3isXNUVaIKr9hEQ2nCUSzJIttOklnincUB3x/K6W923tpPhqQcTUL44tEv5X4e2OWb02bTIybZUAADcYQJY="

notifications:
  email: false

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/

cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
    - $HOME/.konan/
