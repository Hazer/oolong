os:
  - linux
  - osx

osx_image: xcode9.3

language: android

jdk:
  - oraclejdk8

install: ./gradlew :oolong:build

script: .buildscript/deploy_snapshot.sh ":oolong:publish"

env:
  global:
    - GRADLE_OPTS: "-Dorg.gradle.configureondemand=true -Dorg.gradle.parallel=true -Dorg.gradle.workers.max=2 -Dkotlin.incremental=false"
    - secure: "zm400Tq+x8V+T07zgA0Cig2zJ8jmDkgLSx6i9QYnqv2a781vWl4LKPZ1BM0mTPx8HKnULUHIlh/7iN3sPSp9r8ZpBC2Rif+9cj8uD2UfpeZhfChxRHfMJJmE8jUwkETCSv2b83z7BsKcpM/pcediFiJuTLkTCsU5CpuKvRRd9m4uJMCsM8N1rpPGVle4PX2aYTj15fa7ruPZotchsoamt16VKBcku+oZVOEsJLDAaBSc3aaMlbZYXgymF1dZfglzCFLSwaJLBhdFdxjdl0WElg9aFaVdle5Fx/IKYsfCOqeX6Jcf+dOalPZXHRV5YXky1tgvYcPFyTkf11AMMtUB7Uee0jkDrV/OmF7Y8HUV0pdsItD1gmD+QhezS801z45kmbPxegQ+L5F55GziEhzICd1OtVsWnEOlpukcb61a6CbU6qZUSiEVW/t4Ax//2usAZ0vNPpnerpoHL3pgPM6yvKguLqxos5+3k6k+UucvLi/CBlAfG3bE7d6+86jtyYSA7cLqcVTe8Zfiz+Kwo+1Cxmc1qPUN/b0tAgIMlxPrXA8m9m50zI3Tos5kRHWKv2gQxkcFppYan440Ro0yyGrPnOMbysQmYQoWxmGqCBH5jTCBWoyxrCObdBNFG3uKh5m+eUNjkI6adxMnwdNyToOFcGIpdihpQ1gzobpRsUDj23c="
    - secure: "7lcDwU/LfehitRTbnwYU0xHU0wSOiefZxzLgjopNwWyCHKgWh/pnW1MOW49B75QmmNi+NvoW5bxt6w2JTJJaVe6Luc0EVS7rXpOwMH9u8U3dSRQxyON7Lzp2lZMFeAWFL2+o6ywASAuPIVbTIndWKbzX1OsrarL8nTrSPHcUxSz5HeWNNbp0d88eWFMEtCIIsizNC3Mp6LJuwCKggKNUUkk+uZzSB8UJqp0GJGxKOwUCrWaqwUOI6XPTj5B2UGTtRIVZBNwD1mekW77d49WWmXZ6wE9+26ONP1qwTCNK81xGrExo/mVqYjIHOuZ0U1VnpxiF505vCRSHxoOhJ49JO+Zk0280k4KmHk5qP+uAlzO+CaUOSkeep62C6wMFW2tI7Uw5BpM3kwa5bMEY806CouS2jBREZyUB8EI2J1jM8eUrXL7ZNoOw2HIthcaR1/QorjzLQBrdlFFyBePiFeFyY8yErBG6Fpal4cu6CeiF6DZWmiH6ybQRBJyQeFdGycroCYoylD/uVNDDR1q3F352lXaLEh91XggY6pwXatMkTPlCF+6MCPrBAyWsG8OP0zOvItGGJ/0FGuL9HarHJFpekZFOjsNCBwDxb9hU6Zo8gK0lOMFi1rg2x3+L7mWEul3zEcrufpXt5jKNl2lXjsyp6UBa89j6Dy5B1qGjYK8X6f8="

notifications:
  email: false

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/

cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
    - $HOME/.konan/
