os:
  - linux
  - osx

osx_image: xcode9.3

language: android

jdk:
  - oraclejdk8

install: ./gradlew :oolong:build

script: .buildscript/deploy_snapshot.sh ":oolong:publish"

env:
  global:
    - GRADLE_OPTS: "-Dorg.gradle.configureondemand=true -Dorg.gradle.parallel=true -Dorg.gradle.workers.max=2 -Dkotlin.incremental=false"
    - secure: "zm400Tq+x8V+T07zgA0Cig2zJ8jmDkgLSx6i9QYnqv2a781vWl4LKPZ1BM0mTPx8HKnULUHIlh/7iN3sPSp9r8ZpBC2Rif+9cj8uD2UfpeZhfChxRHfMJJmE8jUwkETCSv2b83z7BsKcpM/pcediFiJuTLkTCsU5CpuKvRRd9m4uJMCsM8N1rpPGVle4PX2aYTj15fa7ruPZotchsoamt16VKBcku+oZVOEsJLDAaBSc3aaMlbZYXgymF1dZfglzCFLSwaJLBhdFdxjdl0WElg9aFaVdle5Fx/IKYsfCOqeX6Jcf+dOalPZXHRV5YXky1tgvYcPFyTkf11AMMtUB7Uee0jkDrV/OmF7Y8HUV0pdsItD1gmD+QhezS801z45kmbPxegQ+L5F55GziEhzICd1OtVsWnEOlpukcb61a6CbU6qZUSiEVW/t4Ax//2usAZ0vNPpnerpoHL3pgPM6yvKguLqxos5+3k6k+UucvLi/CBlAfG3bE7d6+86jtyYSA7cLqcVTe8Zfiz+Kwo+1Cxmc1qPUN/b0tAgIMlxPrXA8m9m50zI3Tos5kRHWKv2gQxkcFppYan440Ro0yyGrPnOMbysQmYQoWxmGqCBH5jTCBWoyxrCObdBNFG3uKh5m+eUNjkI6adxMnwdNyToOFcGIpdihpQ1gzobpRsUDj23c="
    - secure: "O1RcZSjy0RXWvJWZCT2OgA+v9etR99ZMojXf7meCdlSkFAdTVo3R2Bt0ssujbVnVEm43qhVBzda717am8t4lNtfM7H0HijHJFApkJsThb/ubxsBfn0CMznnpR+xRsxJkoX0lC6Zrkhpj2Q6m9nlEspeh54uZfrW1wI9pjJW5gHn5jdI7Q9DKgcsmJ3JP4t8nOKgYSezHSRaWY/6c8nhs6FM0ch7db6ha8kxAAc3vxS0vnneXPlM/lB73zz2WviuBRRkWuSJFJ5kVJvFBW37P8IRkTCYRvt4oCH12qEUzyW5EFLBAhUZJvVsAa2PmFmmcFGCEnR/juR3CIU42d/W0qYfLmHNFH2RsAuEonHm8XDKiVCjqxGHvYUeHIE5nwNv6CH8VkXm7FXB9D/xkaJCCAkMHhudaNRooG6aRGN56kZ5dEFf/cQqVuWQMy7zp2xGwkthGj/UzB7DvjlF9Z+/fFkZwgnBR1ERVWBW8DdQO248BqRx704Rq9KCc2jfy0nlUPQDaY5boBkE5z0ruyIL214qvpj5TyaOaWQieuPdMovO6Nu+fU+Ld6AwcqE9lMS5qJqBNhY1rSeuLSNOMvtoBsH9a3isXNUVaIKr9hEQ2nCUSzJIttOklnincUB3x/K6W923tpPhqQcTUL44tEv5X4e2OWb02bTIybZUAADcYQJY="

notifications:
  email: false

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/

cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
    - $HOME/.konan/
